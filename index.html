<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خريطة القائد الاستراتيجي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --gold: #ffcc00; --bg: #0a0a0a; --panel: #161616; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; overflow: hidden; }
        
        /* شريط العنوان */
        header { background: #000; padding: 15px; text-align: center; border-bottom: 2px solid var(--gold); box-shadow: 0 0 15px rgba(255,204,0,0.3); }

        /* حاوية الخريطة */
        .map-container { display: flex; justify-content: center; align-items: center; padding: 40px; background: radial-gradient(circle, #1a1a1a, #000); height: 50vh; }
        svg { filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)); border: 1px solid #333; border-radius: 10px; background: #0d0d0d; }

        /* تصميم الدول */
        .country { fill: #2a2a2a; stroke: #444; stroke-width: 1.5; transition: all 0.4s ease; cursor: pointer; }
        .country:hover { fill: #3a3a3a; stroke: var(--gold); }
        .selected { stroke: var(--gold) !important; stroke-width: 3 !important; filter: brightness(1.2); }
        
        .player-country { fill: #1b4d16 !important; stroke: #00ff00; } /* لون دولتك */
        .ally { fill: #003366 !important; stroke: #00aaff; } /* لون الحليف */
        .enemy { fill: #660000 !important; stroke: #ff0000; } /* لون العدو */

        /* لوحة التحكم */
        .dashboard { display: grid; grid-template-columns: 1fr 350px; gap: 20px; padding: 20px; height: 35vh; box-sizing: border-box; }
        .stats-panel { background: var(--panel); border: 1px solid #333; border-radius: 12px; padding: 20px; overflow-y: auto; }
        .control-panel { background: var(--panel); border: 1px solid #333; border-radius: 12px; padding: 20px; display: flex; flex-direction: column; gap: 10px; }

        h3 { margin-top: 0; color: var(--gold); border-bottom: 1px solid #333; padding-bottom: 10px; }
        .log-entry { font-family: 'Courier New', monospace; font-size: 0.9rem; margin-bottom: 5px; color: #00ff00; border-bottom: 1px solid #222; padding: 5px 0; }
        
        button { background: #222; color: white; border: 1px solid var(--gold); padding: 12px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        button:hover:not(:disabled) { background: var(--gold); color: black; }
        button:disabled { border-color: #444; color: #666; cursor: not-allowed; }
    </style>
</head>
<body>

<header>
    <h2 style="margin:0; letter-spacing: 2px;"><i class="fas fa-map-marked-alt"></i> نظام الرصد الاستراتيجي - الخريطة التفاعلية</h2>
</header>

<div class="map-container">
    <svg width="900" height="400" viewBox="0 0 900 400">
        <path id="egypt" class="country player-country" d="M400,150 L500,150 L500,250 L400,250 Z" onclick="selectCountry('egypt', 'مصر (أرض السيادة)')" />
        <path id="target1" class="country" d="M280,150 L380,150 L380,250 L280,250 Z" onclick="selectCountry('target1', 'القطاع الغربي')" />
        <path id="target2" class="country" d="M520,150 L620,150 L620,250 L520,250 Z" onclick="selectCountry('target2', 'القطاع الشرقي')" />
        <path id="target3" class="country" d="M400,30 L500,30 L500,130 L400,130 Z" onclick="selectCountry('target3', 'القطاع الشمالي')" />
    </svg>
</div>

<div class="dashboard">
    <div class="stats-panel">
        <h3><i class="fas fa-terminal"></i> سجل الأحداث والمخابرات</h3>
        <div id="gameLog">
            <div class="log-entry">> النظام متصل.. اختر قطاعاً من الخريطة للبدء.</div>
        </div>
    </div>

    <div class="control-panel">
        <h4 style="margin:0; color:var(--gold);">الهدف: <span id="currentSelection" style="color:#fff;">لم يتم التحديد</span></h4>
        <button id="btnAlly" onclick="updateRelation('ally')" disabled><i class="fas fa-handshake"></i> توقيع معاهدة تحالف</button>
        <button id="btnEnemy" onclick="updateRelation('enemy')" disabled><i class="fas fa-skull-crossbones"></i> إعلان حالة العداء</button>
        <button id="btnNeutral" onclick="updateRelation('neutral')" disabled><i class="fas fa-flag"></i> إلغاء الاتفاقيات (حياد)</button>
    </div>
</div>

<script>
    let selectedId = null;

    function selectCountry(id, name) {
        // إزالة التحديد السابق
        document.querySelectorAll('.country').forEach(c => c.classList.remove('selected'));
        
        // تحديد الدولة الجديدة
        selectedId = id;
        document.getElementById(id).classList.add('selected');
        document.getElementById('currentSelection').innerText = name;

        // تفعيل الأزرار إذا لم تكن هي دولة اللاعب
        const isPlayer = document.getElementById(id).classList.contains('player-country');
        document.getElementById('btnAlly').disabled = isPlayer;
        document.getElementById('btnEnemy').disabled = isPlayer;
        document.getElementById('btnNeutral').disabled = isPlayer;

        addLog(`تم تحديد الهدف: ${name}. في انتظار الأوامر..`);
    }

    function updateRelation(status) {
        if (!selectedId) return;
        const country = document.getElementById(selectedId);
        
        // تنظيف الحالات السابقة
        country.classList.remove('ally', 'enemy');
        
        let message = "";
        if (status === 'ally') {
            country.classList.add('ally');
            message = `تم إبرام تحالف استراتيجي مع ${selectedId}.`;
        } else if (status === 'enemy') {
            country.classList.add('enemy');
            message = `تحذير: دخلت في حالة صراع مباشر مع ${selectedId}.`;
        } else {
            message = `تمت العودة لحالة الحياد مع ${selectedId}.`;
        }

        addLog(message);
    }

    function addLog(text) {
        const log = document.getElementById('gameLog');
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerText = `> ${new Date().toLocaleTimeString('ar-EG')}: ${text}`;
        log.prepend(entry); // وضع الأحدث في الأعلى
    }
</script>

</body>
</html>
